<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suno Playground</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="/style.css">
</head>
<body>

    <div id="login-overlay">
        <div id="login-box">
            <h3>Введите ключ доступа</h3>
            <input type="password" id="access-key-input" placeholder="••••••••">
            <button id="access-key-button">Войти</button>
            <p id="login-error-message"></p>
        </div>
    </div>
    
    <div id="app-container" style="display: none;"></div>

    <template id="app-template">
        <div class="page-container">
            <!-- *** НОВАЯ БОКОВАЯ ПАНЕЛЬ НАВИГАЦИИ *** -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <h1>Suno Playground</h1>
                </div>
                <nav class="sidebar-nav">
                    <ul>
                        <li><button class="nav-button active" data-view="generate"><i class="fas fa-magic"></i><span>Создать</span></button></li>
                        <li><button class="nav-button" data-view="extend"><i class="fas fa-forward"></i><span>Продлить</span></button></li>
                        <li><button class="nav-button" data-view="upload"><i class="fas fa-upload"></i><span>Загрузить</span></button></li>
                        <li><button class="nav-button" data-view="boost"><i class="fas fa-star"></i><span>Boost</span></button></li>
                        <li><button class="nav-button" data-view="logs" id="logs-nav-button"><i class="fas fa-file-alt"></i><span>Логи</span><span id="logs-notification-dot" class="notification-dot"></span></button></li>
                    </ul>
                </nav>
                <div class="sidebar-footer">
                    <div id="credits-container" class="credits-display" style="display: none;">
                        <span class="credits-label">Кредиты:</span>
                        <span class="credits-value" id="credits-value">...</span>
                        <span class="credits-icon"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill="#f7b731" d="M9.91 15.42c-1.2.7-2.62.7-3.82 0L2.14 13.1c-1.2-.7-1.95-2-1.95-3.37V6.27c0-1.37.75-2.67 1.95-3.37L6.09 0.58c1.2-.7 2.62-.7 3.82 0l3.95 2.32c1.2.7 1.95 2 1.95 3.37v3.46c0 1.37-.75 2.67-1.95 3.37l-3.95 2.32z"></path><path fill="#ffffff" d="M8 10.87a.6.6 0 01-.35-.11L5.5 9.53a.6.6 0 01-.22-.8l.74-2.16-1.63-1.63a.6.6 0 01.16-.94l2.16-.73L7.9 1.1a.6.6 0 011.08.38l.73 2.16 2.16.73a.6.6 0 01.16.94L10.4 7.57l.74 2.16a.6.6 0 01-.22.8l-2.15 1.23a.6.6 0 01-.35.11z"></path></svg></span>
                    </div>
                </div>
            </aside>

            <!-- *** ОСНОВНОЙ КОНТЕНТ *** -->
            <main class="main-content card">
                <!-- Все бывшие вкладки теперь здесь, как "виды" -->
                <div id="generate" class="view-content active">
                    <div class="view-header"><h2>Создать музыку</h2><p>Сгенерируйте трек с нуля по вашему описанию.</p></div>
                    <form id="generate-music-form" class="form-grid">
                        <div class="form-row"><label class="toggle-switch"><input type="checkbox" id="g-customMode" checked><span class="slider"></span><span>Пользовательский режим</span></label><div class="custom-select-wrapper"><input type="hidden" id="g-model-value" value="V4_5PLUS"><div class="select-button" id="select-model-button">V4.5+</div><div class="select-dropdown" id="select-model-dropdown"><div class="select-option selected" data-value="V4_5PLUS">V4.5+</div><div class="select-option" data-value="V4_5">V4.5</div><div class="select-option" data-value="V4">V4</div><div class="select-option" data-value="V3_5">V3.5</div></div></div></div>
                        <div id="simple-mode-fields" class="form-grid" style="display: none;"><div class="form-group" id="g-song-description-group"><label for="g-song-description">Описание песни</label><textarea id="g-song-description" placeholder="Опишите стиль музыки, тему и настроение..."></textarea></div></div>
                        <div id="custom-mode-fields" class="form-grid">
                            <div class="form-group"><label for="g-title">Название</label><input type="text" id="g-title" placeholder="Введите название"></div>
                            <div class="form-group"><label for="g-style">Стиль музыки</label><textarea id="g-style" placeholder="Пример: Pop, Mysterious, Upbeat"></textarea></div>
                            <div class="form-group" id="g-prompt-group"><label for="g-prompt">Текст песни</label><textarea id="g-prompt"></textarea></div>
                            <hr class="divider">
                            <label class="toggle-switch"><input type="checkbox" id="g-instrumental"><span class="slider"></span><span>Инструментал</span></label>
                            <div class="form-group"><label for="g-negativeTags">Негативные теги</label><input type="text" id="g-negativeTags" placeholder="Heavy Metal, Upbeat Drums"></div>
                            <div class="form-group"><label for="g-vocalGender">Пол вокала</label><select id="g-vocalGender"><option value="">Не выбрано</option><option value="m">Мужской</option><option value="f">Женский</option></select></div>
                            <details class="advanced-options"><summary>Дополнительно</summary><div class="form-group slider-group"><label for="g-styleWeight">Сила стиля</label><input type="range" id="g-styleWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div><div class="form-group slider-group"><label for="g-weirdnessConstraint">Креативность</label><input type="range" id="g-weirdnessConstraint" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div></details>
                        </div>
                        <button type="submit" class="submit-button" id="g-submit-button">Сгенерировать</button>
                    </form>
                </div>
                
                <div id="extend" class="view-content"><div class="view-header"><h2>Продлить трек</h2><p>Продолжите генерацию для существующего трека по его ID.</p></div><form id="extend-music-form" class="form-grid"><div class="form-group"><label for="e-audioId">Audio ID</label><input type="text" id="e-audioId" placeholder="ID трека для продления" required></div><div class="form-group"><label for="e-continueAt">Продлить с (секунды)</label><input type="number" id="e-continueAt" value="60"></div><div class="form-group"><label for="e-title">Новое название (опционально)</label><input type="text" id="e-title" placeholder="Введите новое название"></div><div class="form-group"><label for="e-style">Новый стиль (опционально)</label><textarea id="e-style" placeholder="Pop, Mysterious, Upbeat"></textarea></div><div class="form-group"><label for="e-prompt">Новый текст (опционально)</label><textarea id="e-prompt" placeholder="A calm and relaxing piano track..."></textarea></div><div class="form-group"><label for="e-negativeTags">Негативные теги</label><input type="text" id="e-negativeTags" placeholder="Heavy Metal, Upbeat Drums"></div><details class="advanced-options"><summary>Дополнительно</summary><div class="form-group slider-group"><label for="e-styleWeight">Сила стиля</label><input type="range" id="e-styleWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div><div class="form-group slider-group"><label for="e-weirdnessConstraint">Креативность</label><input type="range" id="e-weirdnessConstraint" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div><div class="form-group slider-group"><label for="e-audioWeight">Следование оригиналу</label><input type="range" id="e-audioWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div></details><button type="submit" class="submit-button">Продлить трек</button></form></div>
                
                <div id="upload" class="view-content"><div class="view-header"><h2>Загрузить и обработать</h2><p>Создайте кавер или продлите собственный аудиофайл по ссылке.</p></div><div class="form-grid"><form id="upload-cover-form" class="form-grid"><div class="form-group"><label for="uc-uploadUrl">URL загруженного аудио</label><input type="text" id="uc-uploadUrl" placeholder="https://storage.example.com/audio.mp3" required></div><div class="form-group"><label for="uc-title">Название</label><input type="text" id="uc-title" placeholder="Введите название кавера"></div><div class="form-group"><label for="uc-style">Стиль музыки</label><textarea id="uc-style" placeholder="Pop, Mysterious, Upbeat"></textarea></div><div class="form-group"><label for="uc-prompt">Prompt (описание кавера)</label><textarea id="uc-prompt" placeholder="A calm and relaxing piano track..."></textarea></div><label class="toggle-switch"><input type="checkbox" id="uc-instrumental"><span class="slider"></span><span>Инструментал</span></label><div class="form-group"><label for="uc-negativeTags">Негативные теги</label><input type="text" id="uc-negativeTags" placeholder="Heavy Metal, Upbeat Drums"></div><details class="advanced-options"><summary>Дополнительно</summary><div class="form-group slider-group"><label for="uc-styleWeight">Сила стиля</label><input type="range" id="uc-styleWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div><div class="form-group slider-group"><label for="uc-weirdnessConstraint">Креативность</label><input type="range" id="uc-weirdnessConstraint" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div><div class="form-group slider-group"><label for="uc-audioWeight">Следование оригиналу</label><input type="range" id="uc-audioWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div></details><button type="submit" class="submit-button">Создать кавер</button></form><hr class="divider"><form id="upload-extend-form" class="form-grid"><div class="form-group"><label for="ue-uploadUrl">URL загруженного аудио</label><input type="text" id="ue-uploadUrl" placeholder="https://storage.example.com/audio.mp3" required></div><div class="form-group"><label for="ue-continueAt">Продлить с (секунды)</label><input type="number" id="ue-continueAt" value="60"></div><div class="form-group"><label for="ue-prompt">Новый текст (опционально)</label><textarea id="ue-prompt" placeholder="Extend the music with more relaxing notes..."></textarea></div><details class="advanced-options"><summary>Дополнительно</summary><div class="form-group slider-group"><label for="ue-audioWeight">Следование оригиналу</label><input type="range" id="ue-audioWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div></details><button type="submit" class="submit-button">Продлить загруженное</button></form></div></div>
                
                <div id="boost" class="view-content"><div class="view-header"><h2>Boost Style</h2><p>Улучшите описание стиля для более точных результатов.</p></div><form id="boost-style-form" class="form-grid"><div class="form-group"><label for="b-style-content">Описание стиля для улучшения</label><input type="text" id="b-style-content" placeholder="Пример: Pop, Mysterious" required></div><button type="submit" class="submit-button">Улучшить стиль</button></form></div>

                <div id="logs" class="view-content">
                    <div class="view-header"><h2>Логи операций</h2><p>Здесь отображается статус и ответы от API в реальном времени.</p></div>
                    <div id="logs-content">
                        <h4>Статус операции</h4>
                        <div id="status-container"><p class="status-message">Ожидание запуска задачи...</p></div>
                        <h4>Ответ API</h4>
                        <pre id="response-output">Ожидание вызова API...</pre>
                    </div>
                </div>
            </main>

            <div class="card library-card">
                <div class="tabs" id="library-tabs">
                     <button class="tab-button active" data-filter="all">Все</button>
                     <button class="tab-button" data-filter="favorites">Избранное</button>
                </div>
                <hr class="divider">
                <div id="song-list-container">
                    <p id="empty-list-message">Здесь будут отображаться ваши сгенерированные песни.</p>
                </div>
            </div>
        </div>
    </template>

    <div id="global-player">
        <div id="player-song-info">
            <img id="player-cover" src="" alt="cover">
            <div>
                <div id="player-title">Выберите трек</div>
            </div>
        </div>
        <div id="player-main">
            <div id="player-controls">
                <button class="player-btn" id="shuffle-btn"><i class="fas fa-random"></i></button>
                <button class="player-btn" id="prev-btn"><i class="fas fa-step-backward"></i></button>
                <button class="player-btn" id="play-pause-btn"><i class="fas fa-play"></i></button>
                <button class="player-btn" id="next-btn"><i class="fas fa-step-forward"></i></button>
                <button class="player-btn" id="repeat-btn"><i class="fas fa-repeat"></i></button>
            </div>
            <div id="player-timeline">
                <span id="current-time" class="time-display">0:00</span>
                <input type="range" id="seek-bar" value="0" step="0.1">
                <span id="total-duration" class="time-display">0:00</span>
            </div>
        </div>
        <div id="player-extra-controls"></div>
    </div>

    <div id="lyrics-modal-overlay">
        <div id="lyrics-modal-box">
            <button id="lyrics-modal-close">&times;</button>
            <div id="lyrics-modal-content"></div>
        </div>
    </div>

    <script src="/script.js"></script>
</body>
</html>