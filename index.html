<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suno Playground</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <section id="landing-page">
        <div class="landing-content">
            <h1>Создавайте музыку с помощью ИИ</h1>
            <p>Воплощайте свои музыкальные идеи в жизнь. От простого текста до полноценного трека за считанные секунды.</p>
            <button id="start-button">Начать</button>
        </div>
    </section>

    <div id="login-overlay" style="display: none;">
        <div id="login-box">
            <button id="login-close-button">&times;</button>
            <h3>Введите ключ доступа</h3>
            <input type="password" id="access-key-input" placeholder="••••••••">
            <button id="access-key-button">Войти</button>
            <p id="login-error-message"></p>
        </div>
    </div>
    
    <div id="app-container" style="display: none;"></div>

    <template id="app-template">
        <div id="sidebar-overlay"></div>
        <div id="library-overlay"></div>
        <header class="mobile-header">
            <button id="mobile-menu-toggle"><i class="fas fa-bars"></i></button>
            <h2>Suno Playground</h2>
            <button id="mobile-library-toggle"><i class="fas fa-music"></i></button>
        </header>

        <div class="page-container">
            <aside class="sidebar">
                <div class="sidebar-header">
                    <h1>Suno Playground</h1>
                </div>
                <nav class="sidebar-nav">
                    <ul>
                        <li><button class="nav-button active" data-view="generate"><i class="fas fa-magic"></i><span>Создать</span></button></li>
                        <li><button class="nav-button" data-view="upload-extend"><i class="fas fa-clone"></i><span>Расширить</span></button></li>
                        <li><button class="nav-button" data-view="upload"><i class="fas fa-microphone-alt"></i><span>Кавер</span></button></li>
                        <li><button class="nav-button" data-view="logs" id="logs-nav-button"><i class="fas fa-file-alt"></i><span>Логи</span><span id="logs-notification-dot" class="notification-dot"></span></button></li>
                    </ul>
                </nav>
                <div class="sidebar-footer">
                    <div id="credits-container" class="credits-display" style="display: none;">
                        <span class="credits-value" id="credits-value">...</span>
                        <span class="credits-icon"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill="#f7b731" d="M9.91 15.42c-1.2.7-2.62.7-3.82 0L2.14 13.1c-1.2-.7-1.95-2-1.95-3.37V6.27c0-1.37.75-2.67 1.95-3.37L6.09 0.58c1.2-.7 2.62-.7 3.82 0l3.95 2.32c1.2.7 1.95 2 1.95 3.37v3.46c0 1.37-.75 2.67-1.95 3.37l-3.95 2.32z"></path><path fill="#ffffff" d="M8 10.87a.6.6 0 01-.35-.11L5.5 9.53a.6.6 0 01-.22-.8l.74-2.16-1.63-1.63a.6.6 0 01.16-.94l2.16-.73L7.9 1.1a.6.6 0 011.08.38l.73 2.16 2.16.73a.6.6 0 01.16.94L10.4 7.57l.74 2.16a.6.6 0 01-.22.8l-2.15 1.23a.6.6 0 01-.35.11z"></path></svg></span>
                    </div>
                </div>
            </aside>

            <main class="main-content card">
                <div id="generate" class="view-content active">
                    <div class="view-header"><h2>Создать музыку</h2><p>Сгенерируйте трек с нуля по вашему описанию.</p></div>
                    <form id="generate-music-form">
                        <div class="form-grid">
                            <div class="form-row"><label class="toggle-switch"><input type="checkbox" id="g-customMode" checked><span class="slider"></span><span>Пользовательский режим</span></label><div class="custom-select-wrapper"><input type="hidden" id="g-model-value" value="V4_5PLUS"><div class="select-button" id="select-model-button">V4.5+</div><div class="select-dropdown" id="select-model-dropdown"><div class="select-option selected" data-value="V4_5PLUS">V4.5+</div><div class="select-option" data-value="V4_5">V4.5</div><div class="select-option" data-value="V4">V4</div><div class="select-option" data-value="V3_5">V3.5</div></div></div></div>
                            <div id="simple-mode-fields" class="form-grid" style="display: none;"><div class="form-group" id="g-song-description-group"><label for="g-song-description">Описание песни</label><textarea id="g-song-description" placeholder="Опишите стиль музыки, тему и настроение..."></textarea><div class="char-counter" id="g-song-description-counter">0/400</div></div></div>
                            <div id="custom-mode-fields" class="form-grid">
                                <div class="form-group"><label for="g-title">Название</label><input type="text" id="g-title" placeholder="Введите название"><div class="char-counter" id="g-title-counter">0/80</div></div>
                                <div class="form-group">
                                    <label for="g-style">Стиль музыки</label>
                                    <div class="style-input-container">
                                        <textarea id="g-style" placeholder="Пример: Pop, Mysterious, Upbeat"></textarea>
                                        <button type="button" id="boost-style-button" class="input-action-btn" title="Улучшить стиль (Boost)">
                                            <i class="fas fa-wand-magic-sparkles"></i>
                                        </button>
                                    </div>
                                    <div class="char-counter" id="g-style-counter">0/1000</div>
                                </div>
                                <div class="form-group" id="g-prompt-group"><label for="g-prompt">Текст песни</label><textarea id="g-prompt"></textarea><div class="char-counter" id="g-prompt-counter">0/5000</div></div>
                                <hr class="divider">
                                <label class="toggle-switch"><input type="checkbox" id="g-instrumental"><span class="slider"></span><span>Инструментал</span></label>
                                <div class="form-group"><label for="g-negativeTags">Негативные теги</label><input type="text" id="g-negativeTags" placeholder="Heavy Metal, Upbeat Drums"></div>
                                <div class="form-group" id="g-vocalGender-group"><label for="g-vocalGender">Пол вокала</label><select id="g-vocalGender"><option value="">Не выбрано</option><option value="m">Мужской</option><option value="f">Женский</option></select></div>
                                <details class="advanced-options"><summary>Дополнительно</summary><div class="form-group slider-group"><label for="g-styleWeight">Сила стиля</label><input type="range" id="g-styleWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div><div class="form-group slider-group"><label for="g-weirdnessConstraint">Креативность</label><input type="range" id="g-weirdnessConstraint" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div></details>
                            </div>
                        </div>
                        <button type="submit" class="submit-button" id="g-submit-button">Сгенерировать</button>
                    </form>
                </div>
                
                <div id="upload-extend" class="view-content">
                    <div class="view-header"><h2>Расширить трек</h2><p>Выберите трек из библиотеки или вставьте URL.</p></div>
                    <form id="upload-extend-form">
                        <div class="form-grid">
                             <div class="form-row">
                                <label class="toggle-switch"><input type="checkbox" id="ue-customMode" checked><span class="slider"></span><span>Пользовательские параметры</span></label>
                                <div class="custom-select-wrapper">
                                    <input type="hidden" id="ue-model-value" value="V4_5PLUS">
                                    <div class="select-button" id="select-model-button-ue">V4.5+</div>
                                    <div class="select-dropdown" id="select-model-dropdown-ue">
                                        <div class="select-option selected" data-value="V4_5PLUS">V4.5+</div>
                                        <div class="select-option" data-value="V4_5">V4.5</div>
                                        <div class="select-option" data-value="V4">V4</div>
                                        <div class="select-option" data-value="V3_5">V3.5</div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" id="ue-url-group"><label for="ue-uploadUrl">URL аудио</label><input type="text" id="ue-uploadUrl" placeholder="https://storage.example.com/audio.mp3"></div>
                            <div id="ue-audio-editor" class="audio-editor" style="display: none;"></div>
                            
                            <div id="ue-simple-mode-fields" class="form-grid" style="display: none;">
                                 <div class="form-group"><label for="ue-prompt-simple">Новый текст (Prompt)</label><textarea id="ue-prompt-simple" placeholder="Extend the music with more relaxing notes..."></textarea><div class="char-counter" id="ue-prompt-simple-counter">0/5000</div></div>
                            </div>

                            <div id="ue-custom-mode-fields" class="form-grid">
                                <div class="form-group" id="ue-continueAt-group"><label for="ue-continueAt">Расширить с (секунды)</label><input type="number" id="ue-continueAt" value="60"></div>
                                <div class="form-group"><label for="ue-title">Новое название</label><input type="text" id="ue-title" placeholder="Введите новое название"><div class="char-counter" id="ue-title-counter">0/100</div></div>
                                <div class="form-group"><label for="ue-style">Стиль музыки</label><textarea id="ue-style" placeholder="Pop, Mysterious, Upbeat"></textarea><div class="char-counter" id="ue-style-counter">0/1000</div></div>
                                <div class="form-group" id="ue-prompt-group"><label for="ue-prompt">Новый текст (Prompt)</label><textarea id="ue-prompt" placeholder="Extend the music with more relaxing notes..."></textarea><div class="char-counter" id="ue-prompt-counter">0/5000</div></div>
                                <hr class="divider">
                                <label class="toggle-switch"><input type="checkbox" id="ue-instrumental"><span class="slider"></span><span>Инструментал</span></label>
                                <div class="form-group"><label for="ue-negativeTags">Негативные теги</label><input type="text" id="ue-negativeTags" placeholder="Heavy Metal, Upbeat Drums"></div>
                                <div class="form-group" id="ue-vocalGender-group"><label for="ue-vocalGender">Пол вокала</label><select id="ue-vocalGender"><option value="">Не выбрано</option><option value="m">Мужской</option><option value="f">Женский</option></select></div>
                                <details class="advanced-options"><summary>Дополнительно</summary>
                                    <div class="form-group slider-group"><label for="ue-styleWeight">Сила стиля</label><input type="range" id="ue-styleWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                    <div class="form-group slider-group"><label for="ue-weirdnessConstraint">Креативность</label><input type="range" id="ue-weirdnessConstraint" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                    <div class="form-group slider-group"><label for="ue-audioWeight">Следование оригиналу</label><input type="range" id="ue-audioWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                </details>
                            </div>
                        </div>
                        <button type="submit" class="submit-button">Расширить</button>
                    </form>
                </div>

                <div id="upload" class="view-content">
                    <div class="view-header"><h2>Создать кавер</h2><p>Выберите трек из библиотеки или вставьте URL.</p></div>
                    <form id="upload-cover-form">
                        <div class="form-grid">
                            <div class="form-row">
                                <label class="toggle-switch"><input type="checkbox" id="uc-customMode" checked><span class="slider"></span><span>Пользовательский режим</span></label>
                                <div class="custom-select-wrapper">
                                    <input type="hidden" id="uc-model-value" value="V4_5PLUS">
                                    <div class="select-button" id="select-model-button-uc">V4.5+</div>
                                    <div class="select-dropdown" id="select-model-dropdown-uc">
                                        <div class="select-option selected" data-value="V4_5PLUS">V4.5+</div>
                                        <div class="select-option" data-value="V4_5">V4.5</div>
                                        <div class="select-option" data-value="V4">V4</div>
                                        <div class="select-option" data-value="V3_5">V3.5</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group" id="uc-url-group"><label for="uc-uploadUrl">URL аудио</label><input type="text" id="uc-uploadUrl" placeholder="https://storage.example.com/audio.mp3"></div>
                            <div id="uc-audio-editor" class="audio-editor" style="display: none;"></div>

                            <div id="uc-simple-mode-fields" class="form-grid" style="display: none;">
                                <div class="form-group" id="uc-song-description-group"><label for="uc-song-description">Описание кавера</label><textarea id="uc-song-description" placeholder="A calm and relaxing piano track..."></textarea><div class="char-counter" id="uc-song-description-counter">0/400</div></div>
                            </div>

                            <div id="uc-custom-mode-fields" class="form-grid">
                                <div class="form-group"><label for="uc-title">Название</label><input type="text" id="uc-title" placeholder="Введите название кавера"><div class="char-counter" id="uc-title-counter">0/80</div></div>
                                <div class="form-group"><label for="uc-style">Стиль музыки</label><textarea id="uc-style" placeholder="Pop, Mysterious, Upbeat"></textarea><div class="char-counter" id="uc-style-counter">0/1000</div></div>
                                <div class="form-group" id="uc-prompt-group"><label for="uc-prompt">Prompt (описание кавера)</label><textarea id="uc-prompt" placeholder="A calm and relaxing piano track..."></textarea><div class="char-counter" id="uc-prompt-counter">0/5000</div></div>
                                <hr class="divider">
                                <label class="toggle-switch"><input type="checkbox" id="uc-instrumental"><span class="slider"></span><span>Инструментал</span></label>
                                <div class="form-group"><label for="uc-negativeTags">Негативные теги</label><input type="text" id="uc-negativeTags" placeholder="Heavy Metal, Upbeat Drums"></div>
                                <div class="form-group" id="uc-vocalGender-group"><label for="uc-vocalGender">Пол вокала</label><select id="uc-vocalGender"><option value="">Не выбрано</option><option value="m">Мужской</option><option value="f">Женский</option></select></div>
                                <details class="advanced-options"><summary>Дополнительно</summary>
                                    <div class="form-group slider-group"><label for="uc-styleWeight">Сила стиля</label><input type="range" id="uc-styleWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                    <div class="form-group slider-group"><label for="uc-weirdnessConstraint">Креативность</label><input type="range" id="uc-weirdnessConstraint" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                    <div class="form-group slider-group"><label for="uc-audioWeight">Следование оригиналу</label><input type="range" id="uc-audioWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                </details>
                            </div>
                        </div>
                        <button type="submit" class="submit-button">Создать кавер</button>
                    </form>
                </div>
                
                <div id="logs" class="view-content">
                    <div class="view-header"><h2>Логи операций</h2><p>Здесь отображается статус и ответы от API в реальном времени.</p></div>
                    <div id="logs-content">
                        <h4>Статус операции</h4>
                        <div id="status-container"><p class="status-message">Ожидание запуска задачи...</p></div>
                        <h4>Ответ API</h4>
                        <pre id="response-output">Ожидание вызова API...</pre>
                    </div>
                </div>
            </main>

            <div class="card library-card">
                <div class="library-header">
                    <div id="project-list"></div>
                    <button id="add-project-btn" class="add-project-btn"><i class="fas fa-plus"></i></button>
                </div>
                <div class="tabs" id="library-tabs">
                     <button class="tab-button active" data-filter="all">Все</button>
                     <button class="tab-button" data-filter="favorites">Избранное</button>
                </div>
                <hr class="divider">
                <div id="song-list-container">
                    <p id="empty-list-message">Здесь будут отображаться ваши сгенерированные песни.</p>
                </div>
            </div>
        </div>

        <nav class="mobile-bottom-nav">
            <button class="mobile-nav-btn active" data-view="generate"><i class="fas fa-magic"></i><span>Создать</span></button>
            <button class="mobile-nav-btn" data-view="upload-extend"><i class="fas fa-clone"></i><span>Расширить</span></button>
            <button class="mobile-nav-btn" data-view="upload"><i class="fas fa-microphone-alt"></i><span>Кавер</span></button>
            <button class="mobile-nav-btn" id="mobile-library-btn"><i class="fas fa-music"></i><span>Библиотека</span></button>
        </nav>
    </template>

    <div id="global-player">
        <div id="player-song-info">
            <img id="player-cover" src="" alt="cover">
            <div class="player-text-info">
                <div id="player-title">Выберите трек</div>
                <div id="player-subtitle"></div>
            </div>
        </div>
        <div id="player-main">
            <div id="player-controls">
                <button class="player-btn" id="shuffle-btn"><i class="fas fa-random"></i></button>
                <button class="player-btn" id="prev-btn"><i class="fas fa-step-backward"></i></button>
                <button class="player-btn" id="play-pause-btn"><i class="fas fa-play"></i></button>
                <button class="player-btn" id="next-btn"><i class="fas fa-step-forward"></i></button>
                <button class="player-btn" id="repeat-btn"><i class="fas fa-repeat"></i></button>
            </div>
            <div id="player-timeline-desktop">
                <span id="current-time" class="time-display">0:00</span>
                <input type="range" id="seek-bar" value="0" step="0.1">
                <span id="total-duration" class="time-display">0:00</span>
            </div>
        </div>
        <div id="player-extra-controls">
            <button class="player-btn" id="close-player-btn"><i class="fas fa-times"></i></button>
        </div>
        <div id="player-timeline-mobile">
             <input type="range" id="seek-bar-mobile" value="0" step="0.1">
        </div>
    </div>

    <div id="fullscreen-player-overlay">
        <button id="fs-close-btn"><i class="fas fa-times"></i></button>
        <img id="fs-cover" src="" alt="cover">
        <div id="fs-song-info">
            <h2 id="fs-title"></h2>
            <p id="fs-subtitle"></p>
        </div>
        <div id="fs-lyrics-content">
            <p class="lyrics-placeholder">Текст песни загружается...</p>
        </div>
        <div id="fs-timeline">
            <span id="fs-current-time" class="time-display">0:00</span>
            <input type="range" id="fs-seek-bar" value="0" step="0.1">
            <span id="fs-total-duration" class="time-display">0:00</span>
        </div>
        <div id="fs-controls">
            <button class="player-btn" id="fs-shuffle-btn"><i class="fas fa-random"></i></button>
            <button class="player-btn" id="fs-prev-btn"><i class="fas fa-step-backward"></i></button>
            <button class="player-btn" id="fs-play-pause-btn"><i class="fas fa-play"></i></button>
            <button class="player-btn" id="fs-next-btn"><i class="fas fa-step-forward"></i></button>
            <button class="player-btn" id="fs-repeat-btn"><i class="fas fa-repeat"></i></button>
        </div>
    </div>

    <div id="lyrics-modal-overlay">
        <div id="lyrics-modal-box">
            <button id="lyrics-modal-close">&times;</button>
            <div id="lyrics-modal-content"></div>
            <button id="return-to-active-lyric-btn" class="fab-button"><i class="fas fa-clock"></i></button>
        </div>
    </div>

    <div id="project-modal-overlay" style="display: none;">
        <div id="project-modal-box">
            <button id="project-modal-close-btn">&times;</button>
            <h3>Создать новый проект</h3>
            <input type="text" id="project-name-input" placeholder="Название проекта...">
            <button id="create-project-submit-btn">Создать</button>
            <p id="project-error-message"></p>
        </div>
    </div>

    <div id="confirm-modal-overlay" style="display: none;">
        <div id="confirm-modal-box">
            <h3 id="confirm-modal-title">Подтвердите удаление</h3>
            <p id="confirm-modal-message">Вы уверены, что хотите удалить этот проект?</p>
            <div class="confirm-modal-actions">
                <button id="confirm-modal-cancel-btn">Отмена</button>
                <button id="confirm-modal-confirm-btn">Удалить</button>
            </div>
        </div>
    </div>

    <script type="module" src="/js/app.js"></script>
</body>
</html>